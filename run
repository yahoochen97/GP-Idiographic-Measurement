#!/bin/bash
mkdir -p results
mkdir -p results/synthetic
mkdir -p log
mkdir -p data/synthetic

RANK=5
n=10
m=20
t=30
MAXSEED=25
declare -a TYPES=("pop" "ind" "both" "graded_uni" "graded_multi" "gpcm_uni" "gpcm_multi" "sequential_uni" "sequential_multi")

# for SEED in $(seq 1 1 $MAXSEED); do
#     for TYPE in ${TYPES[@]}; do
#         bsub -G SEAS-Lab-Garnett -o "log/n${n}m${m}t${t}seed${SEED}r${RANK}${TYPE}.log" -J "n${n}m${m}t${t}seed${SEED}r${RANK}${TYPE}" "./onerun ${n} ${m} ${t} ${SEED} ${RANK} ${TYPE}"
#     done
# done

declare -a TYPES=("both")
declare -a FACTORS=(2 5 8)
for SEED in $(seq 1 1 $MAXSEED); do
    for TYPE in ${TYPES[@]}; do
        for FACTOR in ${FACTORS[@]}; do
            bsub -G SEAS-Lab-Garnett -o "log/n${n}m${m}t${t}seed${SEED}f${FACTOR}${TYPE}.log" -J "n${n}m${m}t${t}seed${SEED}f${FACTOR}${TYPE}" "./onerun ${n} ${m} ${t} ${SEED} ${RANK} ${TYPE} ${FACTOR}"
        done
    done
done